# Предметная область базы данных "Моя логистика"

## Высокоуровневое описание

Система предназначена для управления
складами и логистикой.

Существуют некоторые предметы, относящиеся к 
некоторым классам. **Класс предмета** -- его 
название, единицы измерения, время жизни (для 
продуктов питания, например).

Предметы можно хранить на складах. **Склад** 
имеет свой инвентарь. 

**Инвентарь** -- множество слотов.

**Слот** -- ячейка, в которой можно хранить 
предметы одного класса. Размер слота ограничен. В 
слот можно положить некоторое количество 
предметов заданного класса, также можно взять 
несколько предметов, которые в нем хранятся.

Добавление и удаление предметов со склада 
реализуется через транзакции (`+N`, `-N`), чтобы
получить содержимое слота в хранилище, нужно
взять сумму транзакций по данному слоту. 
Транзакция содержит слот, кол-во предметов 
(отрицательное, если забрали), дата проведения
операции (может быть в будущем для отложенных
перекладываний).

Также есть **пользователи**. У пользователей есть 
никнейм и права доступа к складам по средствам 
которых разграничивается их доступы.

Между складами можно перемещать предметы с помощью
автомобилей. **Автомобиль** имеет свой инвентарь 
(вот это поворот).

Поездки всех автомобилей отражены в отдельной 
таблице и тоже в какой-то степени являются 
транзакциями (исходящий слот, входящий слот,
кол-во предмета, время начала, время конца). 
Время поездки вычисляется некоторым всесильным на
основе данных об абстрактном местоположении 
складов.

В нашем случае местоположение -- отображение
`f: Storage -> (float, float)`, расстояние
между складами -- расстояние Миньковского при 
`p = 2`.

Процесс перемешения предмета из склада А в склад Б
состоит из следующих шагов:

* Найти ближайшую к складу А свободную машину, в 
которую поместятся выбранные предметы

* Организовать путешествие машины М к складу А,
если оно необходимо

* Организовать перемещение товаров из инвентаря 
склада А в инвентарь машины М на дату ее прибытия 
к складу А

* Организовать путешествие машины М к складу Б

* Организовать перемещение товаров из инвентаря 
машины М в инвентарь склада Б на дату ее прибытия
к складу А

Также необходима функциональность освобождения 
слота: при желании можно выбрать слот и 
освободить его, при этом автоматически 
организуется оптимальная по времени исполения 
процедура распределения его содержимого по 
другим складам, если это сделать невозможно,
мы умираем.

Кроме того, мы должны быть способны получать
статистику по:
- содержимому конкретного склада
- содержимому группы складов
- занятым и свободным КАМАЗам
